From b8092ffe0c16826be92baa00faef84fdfe6b0b49 Mon Sep 17 00:00:00 2001
From: clover <m.alexanderrobinson@yahoo.com>
Date: Mon, 3 Aug 2020 19:07:35 -0500
Subject: [PATCH] first flashlight additions

---
 src/flashlightinfo.c | 70 ++++++++++++++++++++++++++++++++++++++++++++
 src/flashlightinfo.h | 20 +++++++++++++
 2 files changed, 90 insertions(+)
 create mode 100644 src/flashlightinfo.c
 create mode 100644 src/flashlightinfo.h

diff --git a/src/flashlightinfo.c b/src/flashlightinfo.c
new file mode 100644
index 0000000..ee3fffc
--- /dev/null
+++ b/src/flashlightinfo.c
@@ -0,0 +1,70 @@
+/*
+ * Author: clover <m.alexanderrobinson@yahoo.com>
+ */
+
+ #define G_LOG_DOMAIN "phosh-flashlightinfo"
+
+ #include "config.h"
+
+#include "flashlightinfo.h"
+#include "shell.h"
+
+/**
+ * SECTION:flashlightinfo
+ * @short_description: A widget to display the flashlight status
+ * @Title: PhoshFlashlightInfo
+ *
+ * Flashlight Info widget
+ */
+
+ typedef struct _FlashlightInfo {
+  PhoshStatusIcon parent;
+} FlashlightInfo;
+
+int flashlight_status;
+G_DEFINE_TYPE (FlashlightInfo, flashlight_info, PHOSH_TYPE_STATUS_ICON)
+
+
+void
+set_flashlight_status(int new_status)
+{
+  flashlight_status = new_status;
+}
+
+int
+get_flashlight_status()
+{
+  return flashlight_status;
+}
+
+static void
+flashlight_info_finalize (GObject *object)
+{
+  FlashlightInfo *self = PHOSH_FLASHLIGHT_INFO(object);
+  
+  // possibly can remove
+  g_signal_handlers_disconnect_by_data (phosh_shell_get_default (), self);
+
+  G_OBJECT_CLASS (phosh_flashlight_info_parent_class)->finalize (object);
+}
+
+static void
+phosh_flashlight_info_class_init (PhoshFlashlightInfoClass *klass)
+{
+  GObjectClass *object_class = G_OBJECT_CLASS (klass);
+  object_class->finalize = phosh_flashlight_info_finalize;
+}
+
+static void
+phosh_flashlight_info_init (PhoshFlashlightInfo *self)
+{
+  phosh_status_icon_set_icon_name (PHOSH_STATUS_ICON (self), "weather-clear-symbolic");
+  phosh_status_icon_set_info (PHOSH_STATUS_ICON (self), "Off");
+  set_flashlight_status(1);  
+}
+
+GtkWidget *
+phosh_flashlight_info_new (void)
+{
+  return g_object_new (PHOSH_TYPE_FLASHLIGHT_INFO, NULL);
+}
diff --git a/src/flashlightinfo.h b/src/flashlightinfo.h
new file mode 100644
index 0000000..ab57102
--- /dev/null
+++ b/src/flashlightinfo.h
@@ -0,0 +1,20 @@
+/*
+ *
+ * SPDX-License-Identifier: GPL-3.0+
+ */
+#pragma once
+
+#include <gtk/gtk.h>
+#include "status-icon.h"
+
+G_BEGIN_DECLS
+
+#define PHOSH_TYPE_FLASHLIGHT_INFO (phosh_flashlight_info_get_type())
+
+G_DECLARE_FINAL_TYPE (PhoshFlashlightInfo, phosh_flashlight_info, PHOSH, FLASHLIGHT_INFO, PhoshStatusIcon)
+
+GtkWidget * phosh_flashlight_info_new (void);
+void        set_flashlight_status     (int);
+int         get_flashlight_status     (void);
+
+G_END_DECLS
\ No newline at end of file
