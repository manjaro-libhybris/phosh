From 6f39589381bf15b62b886975b7e864c22e566680 Mon Sep 17 00:00:00 2001
From: clover <m.alexanderrobinson@yahoo.com>
Date: Mon, 3 Aug 2020 22:09:33 -0500
Subject: [PATCH] flashlight compiles

---
 src/flashlightinfo.c    |  19 +++++++++----------
 src/meson.build         |   2 ++
 src/settings.c          |   7 +++----
 5 files changed, 15 insertions(+), 15 deletions(-)
 create mode 100644 src.tar.gz

diff --git a/src/flashlightinfo.c b/src/flashlightinfo.c
index ee3fffc..c06cda9 100644
--- a/src/flashlightinfo.c
+++ b/src/flashlightinfo.c
@@ -2,9 +2,9 @@
  * Author: clover <m.alexanderrobinson@yahoo.com>
  */
 
- #define G_LOG_DOMAIN "phosh-flashlightinfo"
+#define G_LOG_DOMAIN "phosh-flashlightinfo"
 
- #include "config.h"
+#include "config.h"
 
 #include "flashlightinfo.h"
 #include "shell.h"
@@ -17,13 +17,12 @@
  * Flashlight Info widget
  */
 
- typedef struct _FlashlightInfo {
+ typedef struct _PhoshFlashlightInfo {
   PhoshStatusIcon parent;
-} FlashlightInfo;
+} PhoshFlashlightInfo;
 
 int flashlight_status;
-G_DEFINE_TYPE (FlashlightInfo, flashlight_info, PHOSH_TYPE_STATUS_ICON)
-
+G_DEFINE_TYPE (PhoshFlashlightInfo, phosh_flashlight_info, PHOSH_TYPE_STATUS_ICON)
 
 void
 set_flashlight_status(int new_status)
@@ -32,15 +31,15 @@ set_flashlight_status(int new_status)
 }
 
 int
-get_flashlight_status()
+get_flashlight_status(void)
 {
   return flashlight_status;
 }
 
 static void
-flashlight_info_finalize (GObject *object)
+phosh_flashlight_info_finalize (GObject *object)
 {
-  FlashlightInfo *self = PHOSH_FLASHLIGHT_INFO(object);
+  PhoshFlashlightInfo *self = PHOSH_FLASHLIGHT_INFO(object);
   
   // possibly can remove
   g_signal_handlers_disconnect_by_data (phosh_shell_get_default (), self);
@@ -58,7 +57,7 @@ phosh_flashlight_info_class_init (PhoshFlashlightInfoClass *klass)
 static void
 phosh_flashlight_info_init (PhoshFlashlightInfo *self)
 {
-  phosh_status_icon_set_icon_name (PHOSH_STATUS_ICON (self), "weather-clear-symbolic");
+  phosh_status_icon_set_icon_name (PHOSH_STATUS_ICON (self), "torch-disabled-symbolic");
   phosh_status_icon_set_info (PHOSH_STATUS_ICON (self), "Off");
   set_flashlight_status(1);  
 }
diff --git a/src/meson.build b/src/meson.build
index 0af98d4..42dfb7a 100644
--- a/src/meson.build
+++ b/src/meson.build
@@ -120,6 +120,8 @@ libphosh_sources = [
   'rotation.c',
   'sensor-proxy-manager.c',
   'sensor-proxy-manager.h',
+  'flashlightinfo.c',
+  'flashlightinfo.h',
   'rotateinfo.c',
   'rotateinfo.h',
   'rotateautoinfo.c',
diff --git a/src/settings.c b/src/settings.c
index 94b196f..c4c5a00 100644
--- a/src/settings.c
+++ b/src/settings.c
@@ -23,6 +23,7 @@
 #include "rotateinfo.h"
 #include "feedbackinfo.h"
 #include "feedback-manager.h"
+#include "flashlightinfo.h"
 #include "notifications/notify-manager.h"
 #include "notifications/notification-frame.h"
 #include "media-player.h"
@@ -511,7 +512,6 @@ phosh_settings_finalize (GObject *object
 }
 
 
-
 static void
 phosh_settings_class_init (PhoshSettingsClass *klass)
 {
@@ -532,6 +532,7 @@ phosh_settings_class_init (PhoshSettings
   g_type_ensure (PHOSH_TYPE_BT_INFO);
   g_type_ensure (PHOSH_TYPE_DOCKED_INFO);
   g_type_ensure (PHOSH_TYPE_FEEDBACK_INFO);
+  g_type_ensure (PHOSH_TYPE_FLASHLIGHT_INFO);  
   g_type_ensure (PHOSH_TYPE_MEDIA_PLAYER);
   g_type_ensure (PHOSH_TYPE_QUICK_SETTING);
   g_type_ensure (PHOSH_TYPE_ROTATE_INFO);
